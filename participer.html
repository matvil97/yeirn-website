<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>YEIRN — Participer</title>

  <link rel="icon" href="assets/img/logo.png" type="image/png" />
  <link rel="apple-touch-icon" href="assets/img/logo.png" />

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet" />

  <link rel="stylesheet" href="assets/css/main.css" />
</head>

<body>
  <div class="layout">
    <aside class="rail" aria-label="Navigation">
      <button class="rail__burger" type="button" aria-label="Ouvrir le menu" data-burger>
        <span></span><span></span><span></span>
      </button>

      <a class="rail__brand" href="index.html" aria-label="YEIRN">
        <img class="rail__logo" src="assets/img/logo.png" alt="Logo YEIRN" />
      </a>

      <nav class="rail__nav" data-drawer>
        <ul class="rail__menu">
          <li><a href="index.html">Free Worship</a></li>
          <li><a href="home.html">YEIRN</a></li>
          <li><a href="ateliers.html">Ateliers</a></li>
          <li><a href="kits.html">Kits</a></li>
          <li><a class="is-active" href="participer.html">Participer</a></li>
        </ul>
      </nav>
    </aside>

    <main class="main">
      <section class="hero">
        <div class="container">
          <h1 class="hero__title">PARTICIPER</h1>
          <p class="hero__lead">
            L’accès au moment de louange est gratuit (sur inscription). Une option “activité peinture” est disponible.
          </p>
        </div>
      </section>

      <section class="section">
        <div class="container grid grid--2 fw__signup">

          <!-- FORMULAIRE -->
          <div class="fw__panel">
            <h3 class="fw__h3">Inscription</h3>
            <p class="fw__p">
              Remplis tes informations puis choisis ta formule.
            </p>

            <form id="freeWorshipForm" class="fw__form">
              <label class="fw__field">
                <span>Prénom</span>
                <input type="text" name="firstName" autocomplete="given-name" required />
              </label>

              <label class="fw__field">
                <span>Nom</span>
                <input type="text" name="lastName" autocomplete="family-name" required />
              </label>

              <label class="fw__field">
                <span>Email</span>
                <input type="email" name="email" autocomplete="email" required />
              </label>

              <label class="fw__field">
                <span>Téléphone</span>
                <input type="tel" name="phone" autocomplete="tel" required />
              </label>

              <!-- ✅ Champ caché (dans le form) -->
              <input type="hidden" name="formula" id="formula" value="Moment de louange simple (gratuit)" />

              <label class="fw__check">
                <input type="checkbox" name="consent" required />
                <span>J’accepte d’être recontacté(e) par YEIRN au sujet de Free Worship.</span>
              </label>

              <button class="btn" type="submit" style="width:100%;">Valider mon inscription</button>
              <p class="fw__note" id="fwMsg" aria-live="polite"></p>

              <p class="fw__small">
                (Alternative) Google Form :
                <a href="inscription.html" style="text-decoration:underline; text-underline-offset:3px;">ouvrir le formulaire</a>
              </p>
            </form>
          </div>

          <!-- CHOIX FORMULE -->
          <div id="options" class="fw__panel fw__panel--ghost">
            <h3 class="fw__h3">Choisir une formule</h3>
            <p class="fw__p">Sélectionne le format qui te correspond :</p>

            <div class="fw__options" style="display:flex; flex-direction:column; gap:10px;">

              <label class="fwChoice">
                <input type="radio" name="fwChoice" value="free" checked />
                <span class="fwChoice__box">
                  <strong>Moment de louange simple</strong><br>
                  <span class="fwChoice__muted">Gratuit, sur inscription</span>
                </span>
              </label>

              <label class="fwChoice">
                <input type="radio" name="fwChoice" value="paint" />
                <span class="fwChoice__box">
                  <strong>Moment de louange + activité peinture</strong><br>
                  <span class="fwChoice__muted">20€ (paiement Stripe)</span>
                </span>
              </label>

              <!-- Bouton Stripe (affiché seulement si "paint") -->
              <a
                id="stripePaintBtn"
                class="btn"
                href="https://buy.stripe.com/bJe14g4rw2yZ7NU4FzfQI01"
                target="_blank"
                rel="noopener"
                style="width:100%; display:none;"
              >
                Payer l’activité peinture (20€)
              </a>

            </div>

            <p class="fw__small" style="margin-top:10px;">
              La louange est gratuite sur inscription. L’activité peinture nécessite un paiement via Stripe.
            </p>
          </div>

        </div>
      </section>

      <footer class="footer">
        <div class="container footer__inner">
          <p>© <span id="year"></span> YEIRN</p>
        </div>
      </footer>
    </main>
  </div>

  <script src="assets/js/main.js"></script>
  <script src="assets/js/free-worship.js"></script>

  <!-- ✅ petit script local pour synchroniser le choix -->
  <script>
    (function(){
      const formulaInput = document.getElementById("formula");
      const stripeBtn = document.getElementById("stripePaintBtn");
      const radios = document.querySelectorAll('input[name="fwChoice"]');

      function sync(){
        const selected = document.querySelector('input[name="fwChoice"]:checked')?.value || "free";
        const isPaint = selected === "paint";

        if (formulaInput) {
          formulaInput.value = isPaint
            ? "Moment de louange + activité peinture (20€)"
            : "Moment de louange simple (gratuit)";
        }

        if (stripeBtn) {
          stripeBtn.style.display = isPaint ? "inline-flex" : "none";
        }
      }

      radios.forEach(r => r.addEventListener("change", sync));
      sync();
    })();
  </script>
</body>
</html>